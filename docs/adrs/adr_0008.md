---
title: "usearch for Vector Search"
description: "Use usearch HNSW library for vector similarity search with excellent performance and small memory footprint."
type: adr
category: search
tags:
  - vector-search
  - usearch
  - hnsw
  - similarity-search
  - knn
status: published
created: 2025-12-28
updated: 2026-01-04
author: Claude (Architect)
project: subcog
related:
  - docs/adrs/adr_0038.md
technologies:
  - usearch
  - hnsw
  - sqlite
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0008: usearch for Vector Search

## Status

Accepted

## Context

Vector similarity search is needed for semantic search functionality.

## Options Considered

### Option 1: sqlite-vec (SQLite extension)

**Pros:**
- Single file with SQLite
- ACID transactions

**Cons:**
- Less mature
- Performance concerns

### Option 2: usearch (standalone HNSW)

**Pros:**
- Excellent performance
- Well-maintained
- Small memory footprint

**Cons:**
- Separate file from SQLite
- No ACID guarantees

### Option 3: lance (columnar + vector)

**Pros:**
- Combined storage and vector

**Cons:**
- New dependency
- Different paradigm

### Option 4: qdrant (server)

**Pros:**
- Feature-rich
- Production-ready

**Cons:**
- External server required
- Operational complexity

## Decision

We will use usearch for the default SQLite+usearch backend:

- HNSW algorithm for approximate KNN
- Single file persistence
- 384 dimensions (MiniLM)
- Cosine similarity

## Consequences

### Positive

- Excellent performance (<10ms for 10K vectors)
- Small memory footprint
- No external server
- Well-maintained

### Negative

- Separate file from SQLite
- No ACID guarantees
- Requires manual sync

## Decision Outcome

usearch provides the best performance/simplicity tradeoff for local usage. The lack of ACID is acceptable given git notes as authoritative.

## More Information

- **Date:** 2025-12-28
- **Source:** SPEC-2025-12-28: Subcog Rust Rewrite
- **Related ADRs:** [ADR-0038](adr_0038.md) (Vector Index Implementation)

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| usearch HNSW backend implementation present | `src/storage/vector/usearch.rs` | L1-L88 | compliant |

**Summary:** usearch backend is implemented for vector search.

**Action Required:** None
