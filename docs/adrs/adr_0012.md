---
title: "Namespace Weighting Over Query Rewriting"
description: "Apply post-retrieval weight multipliers to namespaces based on detected intent type rather than rewriting search queries."
type: adr
category: search
tags:
  - namespace-weighting
  - ranking
  - search-relevance
  - intent-detection
status: published
created: 2025-12-30
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0012: Namespace Weighting Over Query Rewriting

## Status

Accepted

## Context

To improve recall relevance based on detected intent type, we could either:

1. Rewrite the search query to include namespace-specific terms
2. Apply post-retrieval weight multipliers to specific namespaces

## Decision

We will use **namespace weight multipliers** applied after retrieval:

- HowTo: Patterns 1.5x, Learnings 1.3x
- Troubleshoot: Blockers 1.5x, Learnings 1.3x
- Location/Explanation: Decisions 1.5x, Context 1.3x

## Consequences

### Positive

- Clean separation of concerns (retrieval vs ranking)
- Easier to understand and debug
- Works with existing RecallService search methods
- Weights can be tuned without changing queries

### Negative

- May retrieve irrelevant memories before weighting
- Requires fetching more memories than needed (2x limit)

### Neutral

- Weights are static per intent type (no learning)

## Options Considered

### Option 1: Query rewriting

Add namespace terms to query (e.g., "auth patterns")

**Pros:**
- Single retrieval pass

**Cons:**
- Changes semantics of search, harder to predict results

### Option 2: Filtered search per namespace

Run separate searches per weighted namespace

**Pros:**
- Precise namespace targeting

**Cons:**
- Multiple queries = higher latency

## More Information

- **Date:** 2025-12-30
- **Source:** SPEC-2025-12-30-001: Proactive Memory Surfacing
