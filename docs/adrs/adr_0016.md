---
title: "Confidence Threshold for Injection"
description: "Configurable confidence threshold (default 0.5) with graduated memory injection response to reduce false positives while maintaining useful recall."
type: adr
category: performance
tags:
  - confidence-threshold
  - memory-injection
  - configuration
  - search-intent
status: published
created: 2025-12-30
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0016: Confidence Threshold for Injection

## Status

Accepted

## Context

Not all detected intents should trigger memory injection. Very low confidence detections may inject irrelevant memories.

## Decision

We will use a **configurable confidence threshold** (default 0.5):

- Confidence < 0.5: No memory injection, signal still logged
- Confidence >= 0.5: Inject memories, include reminder
- Confidence >= 0.8: Inject more memories (max_count)

## Consequences

### Positive

- Reduces false positive injections
- Threshold can be tuned per environment
- Graduated response based on confidence

### Negative

- May miss valid intents at threshold boundary
- Default may not be optimal for all users

### Neutral

- Threshold exposed in configuration

## Options Considered

### Option 1: Always inject on any detection

Simple, but noisy

**Cons:**
- Low-confidence detections add noise

### Option 2: User-configurable per session

**Cons:**
- Too complex for MVP (deferred for future enhancement)

## More Information

- **Date:** 2025-12-30
- **Source:** SPEC-2025-12-30-001: Proactive Memory Surfacing

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| Confidence threshold checked before context assembly | `src/hooks/search_context.rs` | L349-L353 | compliant |

**Summary:** Injection is gated by a configurable confidence threshold (default 0.5).

**Action Required:** None
