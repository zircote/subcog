---
title: "Per-Namespace Similarity Thresholds"
description: "Support per-namespace semantic similarity thresholds via environment variables for fine-grained deduplication control."
type: adr
category: configuration
tags:
  - similarity-threshold
  - namespace
  - deduplication
  - configuration
  - environment-variables
status: published
created: 2026-01-01
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - operators
confidence: high
completeness: complete
---

# ADR-0019: Per-Namespace Similarity Thresholds

## Status

Accepted

## Context

Different namespace types may have different tolerance for similarity. Decisions might need stricter matching than learnings.

## Decision

We will support per-namespace thresholds via environment variables (`SUBCOG_DEDUP_THRESHOLD_{NAMESPACE}`) with a default fallback.

## Consequences

### Positive

- Fine-grained control for tuning accuracy per content type
- Decisions (stricter) vs learnings (looser) can be configured independently
- Operators can tune based on observed false positive rates

### Negative

- More configuration complexity
- Harder to document all permutations
- May confuse users with too many options

## Default Values

| Namespace | Default Threshold | Rationale |
|-----------|-------------------|-----------|
| Decisions | 0.92 | High value, avoid losing unique decisions |
| Patterns | 0.90 | Standard threshold |
| Learnings | 0.88 | Learnings often phrased differently |
| Default | 0.90 | Match documented behavior |

## More Information

- **Date:** 2026-01-01
- **Source:** SPEC-2026-01-01-001: Pre-Compact Deduplication

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| Deduplication config loads per-namespace thresholds | `src/services/deduplication/config.rs` | L52-L160 | compliant |

**Summary:** Per-namespace thresholds are loaded from environment variables.

**Action Required:** None
