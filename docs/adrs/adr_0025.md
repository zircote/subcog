---
title: "Fenced Code Blocks Only"
description: "Skip variable extraction only in fenced code blocks (triple backticks/tildes) for minimal complexity while handling 90%+ of documentation cases."
type: adr
category: parsing
tags:
  - code-blocks
  - variable-extraction
  - markdown
  - prompt-templates
status: published
created: 2026-01-01
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0025: Fenced Code Blocks Only

## Status

Accepted

## Context

When excluding `{{variable}}` patterns from extraction, we need to decide which contexts to skip. Options include:

- Fenced code blocks only (` ``` `)
- Fenced + inline code (`` ` ``)
- Fenced + XML tags (`<example>`)
- All common documentation patterns

## Decision

We will skip **fenced code blocks only** (triple backticks and triple tildes).

## Consequences

### Positive

- Minimal code change
- Handles 90%+ of documentation cases
- Clear, predictable behavior
- Easy to explain to users

### Negative

- Inline code with `{{var}}` will still be extracted
- XML-style tags like `<template>` won't be protected

### Neutral

- Users can use fenced blocks as a reliable escape mechanism

## More Information

- **Date:** 2026-01-01
- **Source:** SPEC-2026-01-01-002: Prompt Variable Context-Aware Extraction

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| Regex-based detection for fenced code blocks (``` and ~~~) | `src/models/prompt.rs` | L89-L178 | compliant |

**Summary:** Prompt parsing excludes variables only inside fenced code blocks.

**Action Required:** None
