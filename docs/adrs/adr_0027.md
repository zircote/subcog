---
title: "Full Enrichment Scope"
description: "Use full LLM enrichment for both variable and prompt-level metadata to provide rich, self-documenting templates from first save."
type: adr
category: ai-ml
tags:
  - llm-enrichment
  - metadata
  - prompt-templates
  - variables
status: accepted
created: 2026-01-01
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0027: Full Enrichment Scope

## Status

Accepted

## Context

What should the LLM generate for enrichment?

- Description only
- Description + defaults
- Full enrichment (description, required, default, validation hints)

## Decision Drivers

### Primary Decision Drivers

1. **Self-Documenting Templates**: Users should be able to understand and use prompts without reading documentation or asking the author.

2. **Reduced Manual Effort**: The more metadata generated automatically, the less work users need to do to create usable templates.

3. **Search and Discovery**: Rich metadata (description, tags) improves prompt discoverability in search.

### Secondary Decision Drivers

1. **Variable Usability**: Variable descriptions and defaults make templates immediately usable without guessing what each variable expects.

2. **First-Save Quality**: The initial save is critical; prompts should be fully documented from creation.

## Decision

We will use **full enrichment** for both variables and prompt-level metadata.

## Consequences

### Positive

- Rich, usable frontmatter from first save
- Variables are self-documenting
- Reduces manual editing

### Negative

- Larger LLM response to parse
- More fields that could be wrong
- Higher token cost

### Neutral

- User can edit generated frontmatter after enrichment
- User-provided values are preserved (not overwritten)

## Considered Options

### Option 1: Description Only

**Description**: Generate only a prompt-level description.

**Advantages**: Minimal LLM cost, simple parsing.

**Disadvantages**: Variables remain undocumented, limited search improvement.

### Option 2: Description + Defaults

**Description**: Generate description and variable defaults.

**Advantages**: Moderate enrichment, variables become usable.

**Disadvantages**: Missing variable descriptions, tags, and validation hints.

### Option 3: Full Enrichment (Selected)

**Description**: Generate description, tags, and full variable metadata (description, required, default, validation hints).

**Advantages**: Maximum documentation quality, best user experience.

**Disadvantages**: Higher token cost, more fields that could be incorrect.

## Mitigation

- User can edit generated frontmatter
- User-provided values are preserved (not overwritten)

## More Information

- **Date:** 2026-01-01
- **Source:** SPEC-2026-01-01-002: Prompt Variable Context-Aware Extraction

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| Enrichment request/result include description, tags, variables | `src/services/prompt_enrichment.rs` | L102-L205 | compliant |

**Summary:** LLM enrichment covers prompt metadata and variables.

**Action Required:** None
