---
title: "Score Normalization to 0.0-1.0 Range"
description: "Use linear normalization based on maximum score to provide intuitive 0.0-1.0 relevance scores while preserving relative ordering."
type: adr
category: search
tags:
  - normalization
  - rrf
  - scoring
  - search-results
  - user-experience
status: published
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0035: Score Normalization to 0.0-1.0 Range

## Status

Accepted

## Context

The current RRF implementation produces scores in the range 0.0-0.033 (approximately). Users expect scores in 0.0-1.0 range where higher means more relevant.

Options considered:
1. **No normalization** - Return raw RRF scores
2. **Linear normalization** - Scale to 0.0-1.0 based on max
3. **Min-max normalization** - Scale based on min and max
4. **Sigmoid normalization** - Apply sigmoid function
5. **Percentile normalization** - Convert to percentile rank

## Decision

We will use **linear normalization** based on maximum score in result set.

```rust
fn normalize(results: &[SearchHit]) -> Vec<SearchResult> {
    let max = results.iter().map(|r| r.score).fold(0.0, f32::max);
    results.iter().map(|r| SearchResult {
        score: if max > 0.0 { r.score / max } else { 0.0 },
        raw_score: r.score,
    }).collect()
}
```

## Consequences

### Positive

- Users see intuitive 0.0-1.0 scores
- Top result always scores 1.0 (if results exist)
- Preserves relative ordering

### Negative

- Scores not comparable across queries
- May mask quality differences (if best match is poor)
- Single-result queries always show 1.0

## Options Considered

| Option | Intuitive | Comparable | Stable |
|--------|-----------|------------|--------|
| Raw | No | Yes | Yes |
| Linear | Yes | No* | Yes |
| Min-max | Yes | No | No |
| Sigmoid | Sort of | No | Yes |
| Percentile | Yes | No | No |

*Linear normalization means scores aren't comparable across different queries, but within a query they're intuitive.

## Decision Outcome

Linear normalization provides best user experience for within-query relevance while preserving ordering.

Mitigations:
- Return `raw_score` alongside `score` for debugging
- Add `--raw` CLI flag for power users
- Document normalization behavior

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: Memory System Critical Fixes

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| normalize_scores scales max score to 1.0 | `src/services/recall.rs` | L736-L782 | compliant |

**Summary:** Search scores are normalized to the 0.0-1.0 range.

**Action Required:** None
