---
title: "Graceful Degradation Strategy"
description: "Use graceful degradation with clear fallback hierarchy to ensure system remains functional under partial component failure."
type: adr
category: resilience
tags:
  - graceful-degradation
  - fallback
  - component-failure
  - availability
status: published
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
  - operators
confidence: high
completeness: complete
---

# ADR-0036: Graceful Degradation Strategy

## Status

Accepted

## Context

The system has multiple components that may fail independently:
- Embedding service (model load failure)
- Vector backend (index corruption)
- Index backend (SQLite issues)
- Network (for remote backends)

Need to ensure system remains useful even when components fail.

Options considered:
1. **Fail fast** - Any component failure stops operation
2. **Graceful degradation** - Fall back to available components
3. **Queue and retry** - Queue failed operations for later

## Decision

We will use **graceful degradation** with clear fallback hierarchy.

Degradation matrix:

| Embedder | Vector | Index | Behavior |
|----------|--------|-------|----------|
| ✓ | ✓ | ✓ | Full hybrid search |
| ✓ | ✓ | ✗ | Vector-only + warning |
| ✓ | ✗ | ✓ | Text-only (BM25) + warning |
| ✗ | ✗ | ✓ | Text-only (BM25) + warning |
| ✗ | ✗ | ✗ | Error: no search available |

For capture:
```
1. Embedding fails → Capture to persistence without embedding + warning
2. Index fails → Continue, log warning
3. Vector fails → Continue, log warning
4. Persistence fails → Error (authoritative store must succeed)
```

## Consequences

### Positive

- System remains functional under partial failure
- Users get best available results
- Data never lost (persistence is authoritative)

### Negative

- May return incomplete results without user knowing
- Warnings may be ignored
- Degraded performance may be confusing

## Decision Outcome

Graceful degradation ensures maximum availability while maintaining data integrity.

Mitigations:
- Clear messaging about degraded mode
- `subcog status` shows component health
- Structured logging for monitoring

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: Memory System Critical Fixes

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| RecallService documents fallback behavior when vector is unavailable | `src/services/recall.rs` | L33-L38 | compliant |
| CaptureService logs warnings and continues on secondary failures | `src/services/capture.rs` | L24-L28 | compliant |

**Summary:** Search and capture paths implement graceful degradation with warnings.

**Action Required:** None
