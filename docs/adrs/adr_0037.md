---
title: "Model Selection - all-MiniLM-L6-v2"
description: "Use all-MiniLM-L6-v2 as default embedding model, balancing quality, binary size, and performance for coding assistant use case."
type: adr
category: ai-ml
tags:
  - embeddings
  - model-selection
  - minilm
  - performance
  - tradeoffs
status: published
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
technologies:
  - fastembed
  - onnx
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0037: Model Selection - all-MiniLM-L6-v2

## Status

Accepted

## Context

fastembed-rs supports multiple embedding models. Need to choose default model balancing quality, size, and performance.

Options considered:
| Model | Dimensions | Size | Quality (MTEB) |
|-------|------------|------|----------------|
| all-MiniLM-L6-v2 | 384 | 22MB | 0.63 |
| all-MiniLM-L12-v2 | 384 | 33MB | 0.65 |
| BGE-small-en-v1.5 | 384 | 33MB | 0.67 |
| BGE-base-en-v1.5 | 768 | 110MB | 0.73 |
| nomic-embed-text-v1 | 768 | 137MB | 0.74 |

## Decision

We will use **all-MiniLM-L6-v2** as default.

## Consequences

### Positive

- Smaller binary and memory footprint
- Faster embedding generation
- Proven model with wide adoption

### Negative

- Slightly lower quality than larger models
- May miss subtle semantic relationships

## Options Considered

| Factor | Weight | all-MiniLM-L6-v2 | BGE-base-en-v1.5 |
|--------|--------|------------------|------------------|
| Quality | 30% | Good (0.63) | Excellent (0.73) |
| Size | 25% | Small (22MB) | Large (110MB) |
| Speed | 25% | Fast (~30ms) | Slower (~60ms) |
| Memory | 20% | ~50MB | ~200MB |

## Decision Outcome

For Subcog's use case (coding assistant memories), all-MiniLM-L6-v2 provides sufficient quality with significantly better size/speed characteristics.

Mitigations:
- Allow model override via config
- Consider model upgrade in future version
- Hybrid search (text + vector) compensates

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: Memory System Critical Fixes

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| Embedding model set to all-MiniLM-L6-v2 | `src/embedding/fastembed.rs` | L25-L45 | compliant |

**Summary:** all-MiniLM-L6-v2 is the configured embedding model.

**Action Required:** None
