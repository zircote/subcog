---
title: "Vector Index Implementation - usearch"
description: "Use existing usearch HNSW implementation for vector similarity search rather than introducing new dependencies."
type: adr
category: search
tags:
  - vector-search
  - usearch
  - hnsw
  - cosine-similarity
status: published
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
technologies:
  - rust
  - usearch
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0038: Vector Index Implementation - usearch

## Status

Accepted

## Context

Need a vector similarity search index for semantic search. The codebase already has `UsearchBackend` implemented but not connected.

Options considered:
1. **usearch** (existing) - HNSW index, Rust bindings
2. **hnswlib** - Original HNSW implementation
3. **faiss** - Facebook's similarity search
4. **pgvector** - PostgreSQL extension
5. **milvus** - Distributed vector DB
6. **brute force** - Linear scan

## Decision

We will use **usearch** (already implemented).

## Consequences

### Positive

- No new implementation needed
- Battle-tested HNSW algorithm
- Fast search (<10ms for 10k vectors)

### Negative

- Single-node only (no distributed)
- Memory-mapped, needs disk space

## Options Considered

usearch is already implemented in the codebase at `src/storage/vector/usearch.rs` with both native and fallback modes. The implementation supports:
- HNSW graph structure
- Cosine similarity
- Namespace filtering
- Persistence to disk

No reason to change - just need to wire it up.

## Decision Outcome

Use existing usearch implementation rather than introducing new dependencies.

Mitigations:
- PostgreSQL + pgvector available for scaling
- Can migrate index without data loss (rebuild from persistence)

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: Memory System Critical Fixes

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| usearch backend used for vector search | `src/storage/vector/usearch.rs` | L1-L88 | compliant |

**Summary:** usearch is the vector index implementation.

**Action Required:** None
