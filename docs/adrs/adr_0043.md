---
title: "No-Op SyncService for User Scope"
description: "Create SyncService::no_op() returning empty success stats for user-scope where git sync is unavailable."
type: adr
category: architecture
tags:
  - sync-service
  - no-op
  - user-scope
  - graceful-handling
status: published
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0043: No-Op SyncService for User Scope

## Status

Accepted

## Context

User-scope has no git remote to sync with. SyncService must handle this gracefully.

## Decision Drivers

### Primary Decision Drivers

1. **API Consistency**: ServiceContainer should always have a SyncService, even if it's a no-op
2. **Script Compatibility**: Scripts calling sync unconditionally should not crash
3. **User Experience**: No confusing errors for user-scope sync attempts

### Secondary Decision Drivers

1. **Extensibility**: Design should allow adding cloud sync in the future
2. **Clarity**: Method name should clearly indicate no-op behavior
3. **Testability**: No-op implementation should be easy to test

## Considered Options

### Option 1: Return Error When Sync Called on User Scope

**Description**: Return an error indicating sync is not available.

**Advantages**:
- Clear feedback that sync is unavailable

**Disadvantages**:
- Poor UX for scripts that call sync unconditionally
- Breaks workflows that expect sync to succeed

### Option 2: Return Empty Success (No-Op) - Selected

**Description**: Create `SyncService::no_op()` that returns empty success stats.

**Advantages**:
- No special-casing in callers
- Clear intent in method name
- Easy to extend later (can add cloud sync)
- Graceful handling - sync commands don't crash
- Consistent API - ServiceContainer always has SyncService
- User-friendly - no confusing errors for user-scope

**Disadvantages**:
- Silent no-op might confuse users expecting sync
- Should document this behavior

### Option 3: Omit SyncService from User-Scope Container

**Description**: Make SyncService optional via `Option<SyncService>`.

**Advantages**:
- Explicit about sync unavailability

**Disadvantages**:
- Breaking API change
- Requires `Option<>` everywhere
- More code changes throughout codebase

### Option 4: Future Cloud Backup Sync

**Description**: Implement cloud sync for user-scope now.

**Advantages**:
- Full sync functionality for user-scope

**Disadvantages**:
- Out of scope
- Significant additional work
- Different implementation needed

## Decision

We will create `SyncService::no_op()` that returns empty success stats.

## Consequences

### Positive

- No special-casing in callers
- Clear intent in method name
- Easy to extend later (can add cloud sync)
- Graceful handling - sync commands don't crash
- Consistent API - ServiceContainer always has SyncService
- User-friendly - no confusing errors for user-scope

### Negative

- Silent no-op might confuse users expecting sync
- Should document this behavior

### Neutral

- Future cloud sync implementation can replace no-op behavior
- Documentation should explain user-scope sync limitations

## Decision Outcome

A no-op implementation maintains API consistency while allowing graceful operation in user-scope contexts.

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: User-Scope Storage Fallback

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| SyncService::no_op returns no-op sync service | `src/services/sync.rs` | L31-L40 | compliant |
| ServiceContainer::for_user uses SyncService::no_op | `src/services/mod.rs` | L334-L337 | compliant |

**Summary:** User scope uses a no-op SyncService implementation.

**Action Required:** None
