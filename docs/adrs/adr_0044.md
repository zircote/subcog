---
title: "User Data Directory Location"
description: "Use directories crate for platform-specific user data locations following OS conventions."
type: adr
category: configuration
tags:
  - directories
  - platform-specific
  - user-data
  - xdg
  - cross-platform
status: published
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
technologies:
  - rust
  - directories
audience:
  - developers
  - architects
  - operators
confidence: high
completeness: complete
---

# ADR-0044: User Data Directory Location

## Status

Accepted

## Context

Need to determine where user-scope data should be stored.

Options considered:
1. XDG Base Directory Specification (`~/.local/share/subcog/`)
2. Home directory dotfile (`~/.subcog/`)
3. Platform-specific locations (using `directories` crate)
4. Configurable via environment variable

## Decision

We will use the **`directories` crate** for platform-specific locations.

Platform locations:
- **macOS**: `~/Library/Application Support/subcog/`
- **Linux**: `~/.local/share/subcog/`
- **Windows**: `C:\Users\<User>\AppData\Local\subcog\`

## Consequences

### Positive

- Professional, follows platform conventions
- Users know where to find data
- Works across all major platforms
- No home directory clutter
- Already a dependency (no new crate needed)
- Tested and well-maintained

### Negative

- Paths differ by platform (documentation complexity)
- `directories` crate might fail on unusual systems

## Alternatives Considered

- **`~/.subcog/`**: Clutters home directory, non-standard on macOS/Windows
- **XDG only**: Doesn't apply to macOS/Windows
- **Environment variable**: Added complexity, users must configure

## Decision Outcome

Platform-specific directories provide the best user experience and follow established conventions on each OS.

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: User-Scope Storage Fallback

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| get_user_data_dir uses directories::BaseDirs | `src/storage/index/domain.rs` | L277-L294 | compliant |

**Summary:** User data directory is resolved with directories::BaseDirs.

**Action Required:** None
