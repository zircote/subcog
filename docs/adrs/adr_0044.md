---
title: "User Data Directory Location"
description: "Use directories crate for platform-specific user data locations following OS conventions."
type: adr
category: configuration
tags:
  - directories
  - platform-specific
  - user-data
  - xdg
  - cross-platform
status: accepted
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
technologies:
  - rust
  - directories
audience:
  - developers
  - architects
  - operators
confidence: high
completeness: complete
---

# ADR-0044: User Data Directory Location

## Status

Accepted

## Context

Need to determine where user-scope data should be stored.

## Decision Drivers

### Primary Decision Drivers

1. **Platform Conventions**: Follow established conventions for each operating system
2. **User Expectations**: Users should know where to find their data
3. **No Home Directory Clutter**: Avoid adding dotfiles to home directory

### Secondary Decision Drivers

1. **Dependency Reuse**: Use existing `directories` crate if already a dependency
2. **Reliability**: Solution must work on all major platforms
3. **Testability**: Path resolution should be predictable and testable

## Considered Options

### Option 1: XDG Base Directory Specification

**Description**: Use `~/.local/share/subcog/` following XDG spec.

**Advantages**:
- Standard on Linux

**Disadvantages**:
- Doesn't apply to macOS/Windows
- Non-standard on non-Linux platforms

### Option 2: Home Directory Dotfile

**Description**: Use `~/.subcog/` directory.

**Advantages**:
- Simple
- Works everywhere

**Disadvantages**:
- Clutters home directory
- Non-standard on macOS/Windows

### Option 3: Platform-Specific Locations via directories Crate (Selected)

**Description**: Use `directories` crate for platform-specific locations.

**Advantages**:
- Professional, follows platform conventions
- Users know where to find data
- Works across all major platforms
- No home directory clutter
- Already a dependency (no new crate needed)
- Tested and well-maintained

**Disadvantages**:
- Paths differ by platform (documentation complexity)
- `directories` crate might fail on unusual systems

### Option 4: Configurable via Environment Variable

**Description**: Allow user to set data directory via environment variable.

**Advantages**:
- Maximum flexibility

**Disadvantages**:
- Added complexity
- Users must configure

## Decision

We will use the **`directories` crate** for platform-specific locations.

Platform locations:
- **macOS**: `~/Library/Application Support/subcog/`
- **Linux**: `~/.local/share/subcog/`
- **Windows**: `C:\Users\<User>\AppData\Local\subcog\`

## Consequences

### Positive

- Professional, follows platform conventions
- Users know where to find data
- Works across all major platforms
- No home directory clutter
- Already a dependency (no new crate needed)
- Tested and well-maintained

### Negative

- Paths differ by platform (documentation complexity)
- `directories` crate might fail on unusual systems

### Neutral

- Documentation must list paths for each platform
- Fallback behavior needed if directories crate fails

## Decision Outcome

Platform-specific directories provide the best user experience and follow established conventions on each OS.

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: User-Scope Storage Fallback

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| get_user_data_dir uses directories::BaseDirs | `src/storage/index/domain.rs` | L277-L294 | compliant |

**Summary:** User data directory is resolved with directories::BaseDirs.

**Action Required:** None
