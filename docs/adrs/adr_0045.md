---
title: "URN Format for User Scope"
description: "Use subcog://user/{namespace}/{id} URN format for user-scoped memories to clearly distinguish from global scope."
type: adr
category: architecture
tags:
  - urn
  - user-scope
  - naming-convention
  - identifiers
status: accepted
created: 2026-01-02
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0045: URN Format for User Scope

## Status

Accepted

## Context

User-scope memories need URN identifiers. Current project-scope uses `subcog://global/{namespace}/{id}`.

## Decision Drivers

### Primary Decision Drivers

1. **Scope Identification**: Users must be able to identify memory scope from URN
2. **Consistency**: Format should be consistent with existing global URN format
3. **Parseability**: URNs must be programmatically parseable

### Secondary Decision Drivers

1. **URL Safety**: URN should be valid URL without special encoding
2. **Filtering**: Should be easy to filter by scope in tools
3. **Documentation**: Format should be easy to document and explain

## Considered Options

### Option 1: subcog://user/{namespace}/{id} (Selected)

**Description**: Use `user` as scope identifier in URN.

**Advantages**:
- Users can immediately identify memory scope
- Easy to filter by scope in tools
- Consistent with internal `Domain` representation
- Clear scope indicator ("user" clearly indicates personal scope)
- Standard URN format maintained
- Parseable

**Disadvantages**:
- Two URN prefixes to document
- Search results might mix scopes (if cross-scope search added)

### Option 2: subcog://local/{namespace}/{id}

**Description**: Use `local` as scope identifier.

**Advantages**:
- Indicates non-shared scope

**Disadvantages**:
- Ambiguous (local to what?)
- Less clear than "user"

### Option 3: subcog://~/{namespace}/{id}

**Description**: Use tilde (`~`) as scope identifier.

**Advantages**:
- Unix convention for home directory

**Disadvantages**:
- Not URL-safe without encoding
- May cause parsing issues

### Option 4: Keep subcog://global/{namespace}/{id} for All Scopes

**Description**: Use same prefix for all scopes.

**Advantages**:
- Simpler

**Disadvantages**:
- No way to distinguish scopes
- Confusing for users

## Decision

We will use `subcog://user/{namespace}/{id}` for user-scoped memories.

## Consequences

### Positive

- Users can immediately identify memory scope
- Easy to filter by scope in tools
- Consistent with internal `Domain` representation
- Clear scope indicator ("user" clearly indicates personal scope)
- Standard URN format maintained
- Parseable

### Negative

- Two URN prefixes to document
- Search results might mix scopes (if cross-scope search added)

### Neutral

- Future scopes (e.g., team, organization) can follow same pattern
- Documentation should explain both URN formats

## Decision Outcome

The `user` prefix provides clear, unambiguous scope identification that aligns with the internal domain model.

## More Information

- **Date:** 2026-01-02
- **Source:** SPEC-2026-01-02: User-Scope Storage Fallback

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| User-scoped domain is represented as 'user' | `src/models/domain.rs` | L192-L252 | compliant |
| URN builder uses domain string for scope | `src/services/capture.rs` | L332-L344 | compliant |

**Summary:** User scope renders as `user` in URNs generated from domain display.

**Action Required:** None
