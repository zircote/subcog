---
title: "HTTP Transport Returns 204 for Notifications"
description: "Return HTTP 204 No Content for notifications over HTTP transport as the semantically correct response."
type: adr
category: integration
tags:
  - http
  - json-rpc
  - mcp
  - notification
status: published
created: 2026-01-04
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0057: HTTP Transport Returns 204 for Notifications

## Status

Accepted

## Context

For the HTTP transport, we need to decide what HTTP response to send for notifications. Since no JSON-RPC response body is appropriate, we need an HTTP status that conveys "received, no content."

## Decision Drivers

### Primary Decision Drivers

1. **Semantic Correctness**: HTTP status should accurately describe the response
2. **Client Expectations**: Clients should not try to parse empty body as JSON
3. **Standard Practice**: Follow HTTP conventions

### Secondary Decision Drivers

1. **Consistency**: Same behavior for all notification types
2. **Debuggability**: Clear status code aids debugging

## Considered Options

### Option 1: HTTP 204 No Content (Selected)

**Description**: Return HTTP 204 for notifications.

**Advantages**:
- Semantically correct (the notification was received, there's no content to return)
- Standard HTTP practice
- Clients won't try to parse an empty body as JSON

**Disadvantages**:
- Some clients might expect 200 OK for all successful operations

### Option 2: HTTP 200 OK with Empty Body

**Description**: Return 200 with no body content.

**Advantages**:
- Valid HTTP response

**Disadvantages**:
- Less semantically precise
- Some clients may try to parse empty body as JSON

### Option 3: HTTP 200 OK with `{}` Body

**Description**: Return 200 with empty JSON object.

**Advantages**:
- Always valid JSON

**Disadvantages**:
- Misleading - suggests there was a response
- Not accurate for notifications

## Decision

We will return **HTTP 204 No Content** for notifications over HTTP transport.

## Consequences

### Positive

- Semantically correct (the notification was received, there's no content to return)
- Standard HTTP practice
- Clients won't try to parse an empty body as JSON

### Negative

- Some clients might expect 200 OK for all successful operations

### Neutral

- Could alternatively return 200 with empty body, but 204 is more explicit

## More Information

- **Date:** 2026-01-04
- **Source:** SPEC-2026-01-04-001: MCP Server JSON-RPC Notification Compliance
- **GitHub Issue:** [#46](https://github.com/zircote/subcog/issues/46)

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| HTTP handler returns 204 for notifications | `src/mcp/server.rs` | L1308-L1333 | compliant |

**Summary:** HTTP notifications return 204 No Content.

**Action Required:** None
