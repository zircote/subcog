---
title: "Debug-Level Logging for Notifications"
description: "Log notifications at debug level with method name and add counter metric for observability."
type: adr
category: observability
tags:
  - logging
  - observability
  - notification
  - metrics
status: published
created: 2026-01-04
updated: 2026-01-04
author: Claude (Architect)
project: subcog
audience:
  - developers
  - architects
confidence: high
completeness: complete
---

# ADR-0058: Debug-Level Logging for Notifications

## Status

Accepted

## Context

We need observability into notification handling without creating log noise in production.

## Decision Drivers

### Primary Decision Drivers

1. **Observability**: Need visibility into notification handling for debugging
2. **Log Noise**: Production logs should not be cluttered with routine notifications
3. **Metrics**: Volume tracking enables capacity planning

### Secondary Decision Drivers

1. **Consistency**: Follow existing logging patterns in the codebase
2. **Flexibility**: Allow verbose logging in development

## Considered Options

### Option 1: Debug-Level Logging with Metrics (Selected)

**Description**: Log notifications at `debug` level, add counter metric `mcp_notifications_total`.

**Advantages**:
- Observability for debugging
- Metrics for monitoring notification volume
- No log noise at info/warn levels

**Disadvantages**:
- Debug logs may be verbose in development

### Option 2: Info-Level Logging

**Description**: Log all notifications at info level.

**Advantages**:
- Always visible in logs

**Disadvantages**:
- Creates log noise in production
- High-volume notifications overwhelm logs

### Option 3: No Logging

**Description**: Do not log notifications at all.

**Advantages**:
- No log overhead

**Disadvantages**:
- No visibility for debugging
- Cannot diagnose notification issues

## Decision

We will log notifications at `debug` level with the method name. Add a counter metric `mcp_notifications_total` with method label.

## Consequences

### Positive

- Observability for debugging
- Metrics for monitoring notification volume
- No log noise at info/warn levels

### Negative

- Debug logs may be verbose in development

### Neutral

- Consistent with existing logging patterns in the codebase

## More Information

- **Date:** 2026-01-04
- **Source:** SPEC-2026-01-04-001: MCP Server JSON-RPC Notification Compliance
- **GitHub Issue:** [#46](https://github.com/zircote/subcog/issues/46)

## Audit

### 2026-01-04

**Status:** Compliant

**Findings:**

| Finding | Files | Lines | Assessment |
|---------|-------|-------|------------|
| Notification logging and mcp_notifications_total metric | `src/mcp/server.rs` | L675-L685 | compliant |

**Summary:** Notifications are logged at debug level and counted via metrics.

**Action Required:** None
